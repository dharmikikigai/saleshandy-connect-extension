/* eslint-disable no-unused-vars */
import React, { useEffect, useState } from 'react';
import { useRecoilState } from 'recoil';
import { profilePageState } from './state';
import Main from './main';
import './responsive-screen.css';

const handleClose = () => {
  const element = document.getElementById('react-root');
  if (element) {
    element.style.display = 'none';
  }
};

const handleClick = () => {
  window.open(
    'https://my.saleshandy.com/settings/billing/subscriptions/lead-finder',
    '_blank',
  );
};

const Header = () => {
  const [showProfilePage, setShowProfilePage] = useState(false);
  const [count, setCount] = useRecoilState(profilePageState);
  const [leadFinderCredits, setLeadFinderCredits] = useState(0);

  const handleProfileClick = () => {
    setShowProfilePage(true);
    setCount(true);
  };

  const getLeadFinderCredits = () => {
    chrome.storage.local.get('saleshandyMetaData', (result) => {
      const saleshandyMetaData = result?.saleshandyMetaData;
      if (saleshandyMetaData) {
        const credits = saleshandyMetaData.leadFinderCredits;
        setLeadFinderCredits(credits);
      }
    });
  };

  useEffect(() => {
    getLeadFinderCredits();
  }, []);

  return (
    <>
      {showProfilePage ? (
        <Main />
      ) : (
        <>
          <div
            className="d-flex"
            style={{
              width: '100%',
              minHeight: '32px',
              alignItems: 'baseline',
              borderBottom: '1px solid #E5E7EB',
              gap: '12px',
              marginTop: '16px',
            }}
          >
            <div
              style={{
                width: '100%',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'space-between',
                padding: '0px 16px',
              }}
            >
              <div>
                <svg
                  width="89"
                  height="16"
                  viewBox="0 0 89 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clipPath="url(#clip0_35895_50272)">
                    <g clipPath="url(#clip1_35895_50272)">
                      <path
                        d="M5.00196 0.0390625C4.40463 0.0390625 4.10549 0.753549 4.52786 1.17141L15.6483 12.173C16.0706 12.5909 16.7928 12.295 16.7928 11.704V0.702379C16.7928 0.33604 16.4927 0.0390625 16.1224 0.0390625H5.00196Z"
                        fill="#1D4ED8"
                      />
                      <path
                        d="M8.55915 14.4461C8.87593 14.7595 9.41758 14.5375 9.41758 14.0943V7.83303C9.41758 7.55828 9.19245 7.33554 8.91473 7.33554H2.58586C2.13786 7.33554 1.9135 7.87141 2.23029 8.18481L8.55915 14.4461Z"
                        fill="#1D4ED8"
                      />
                      <path
                        d="M4.15195 15.3925C4.36314 15.6014 4.72424 15.4534 4.72424 15.158V12.3104C4.72424 12.1272 4.57415 11.9788 4.389 11.9788H1.51072C1.21205 11.9788 1.06248 12.336 1.27367 12.5449L4.15195 15.3925Z"
                        fill="#1D4ED8"
                      />
                    </g>
                    <path
                      d="M26.0115 7.56198C25.0423 7.42566 24.71 7.26213 24.71 6.82595C24.71 6.41705 25.07 6.14448 25.6792 6.14448C26.3161 6.14448 26.6483 6.38981 26.7315 6.93502H28.4482C28.2821 5.40847 27.1468 4.86328 25.6515 4.86328C24.267 4.86328 22.9656 5.54477 22.9656 6.93502C22.9656 8.24344 23.6579 8.73412 25.4577 9.00673C26.4268 9.14301 26.8145 9.33383 26.8145 9.79726C26.8145 10.2606 26.4822 10.5333 25.7623 10.5333C24.9593 10.5333 24.6547 10.1789 24.5716 9.57919H22.8271C22.8825 11.0239 23.9624 11.8145 25.7623 11.8145C27.5345 11.8145 28.6143 11.0512 28.6143 9.63369C28.6421 8.21619 27.7006 7.8073 26.0115 7.56198Z"
                      fill="#202020"
                    />
                    <path
                      d="M32.6848 4.89062C31.0234 4.89062 29.7496 5.3813 29.6389 6.96237H31.411C31.4941 6.3899 31.8264 6.22634 32.574 6.22634C33.4324 6.22634 33.6816 6.66251 33.6816 7.453V7.72561H32.9063C30.8296 7.72561 29.3896 8.29808 29.3896 9.85185C29.3896 11.2421 30.4142 11.8418 31.6603 11.8418C32.7125 11.8418 33.3216 11.4329 33.7093 10.8877V11.6782H35.5369V7.37126C35.5092 5.54486 34.3462 4.89062 32.6848 4.89062ZM33.6539 9.36118C33.6539 10.0972 33.0171 10.5334 32.1864 10.5334C31.4941 10.5334 31.2172 10.2062 31.2172 9.74282C31.2172 9.03407 31.8541 8.78875 32.934 8.78875H33.6539V9.36118Z"
                      fill="#202020"
                    />
                    <path
                      d="M38.1131 2.02734H36.2578V11.7045H38.1131V2.02734Z"
                      fill="#202020"
                    />
                    <path
                      d="M42.3483 4.89062C40.3823 4.89062 38.8594 6.2536 38.8594 8.35257V8.46161C38.8594 10.5878 40.3546 11.8418 42.376 11.8418C44.2312 11.8418 45.3942 11.0513 45.6157 9.60654H43.8436C43.7328 10.179 43.2898 10.5334 42.4314 10.5334C41.4069 10.5334 40.7977 9.90639 40.7423 8.78875H45.6157V8.27083C45.6434 5.89923 44.0928 4.89062 42.3483 4.89062ZM40.7977 7.64382C40.9361 6.68976 41.5176 6.14456 42.3483 6.14456C43.2344 6.14456 43.7605 6.63522 43.8159 7.64382H40.7977Z"
                      fill="#202020"
                    />
                    <path
                      d="M49.5486 7.56198C48.5795 7.42566 48.2472 7.26213 48.2472 6.82595C48.2472 6.41705 48.6071 6.14448 49.2163 6.14448C49.8532 6.14448 50.1855 6.38981 50.2686 6.93502H51.9853C51.8192 5.40847 50.6839 4.86328 49.1886 4.86328C47.8041 4.86328 46.5027 5.54477 46.5027 6.93502C46.5027 8.24344 47.195 8.73412 48.9948 9.00673C49.9639 9.14301 50.3516 9.33383 50.3516 9.79726C50.3516 10.2606 50.0193 10.5333 49.2994 10.5333C48.4964 10.5333 48.1918 10.1789 48.1087 9.57919H46.3643C46.4196 11.0239 47.4995 11.8145 49.2994 11.8145C51.0716 11.8145 52.1515 11.0512 52.1515 9.63369C52.1792 8.21619 51.2654 7.8073 49.5486 7.56198Z"
                      fill="#202020"
                    />
                    <path
                      d="M56.9952 4.8896C55.8599 4.8896 55.14 5.43479 54.8074 6.08901V2.02734H52.9248V11.7045H54.8074V7.8609C54.8074 6.87954 55.4166 6.38886 56.2198 6.38886C57.0504 6.38886 57.4103 6.825 57.4103 7.72457V11.7045H59.2933V7.45201C59.2656 5.68012 58.3243 4.8896 56.9952 4.8896Z"
                      fill="#202020"
                    />
                    <path
                      d="M63.337 4.89062C61.6758 4.89062 60.4019 5.3813 60.2912 6.96237H62.0635C62.1464 6.3899 62.4786 6.22634 63.2262 6.22634C64.0846 6.22634 64.3338 6.66251 64.3338 7.453V7.72561H63.5588C61.4817 7.72561 60.042 8.29808 60.042 9.85185C60.042 11.2421 61.0666 11.8418 62.3127 11.8418C63.3647 11.8418 63.9739 11.4329 64.3616 10.8877V11.6782H66.1891V7.37126C66.1617 5.54486 64.9708 4.89062 63.337 4.89062ZM64.3065 9.36118C64.3065 10.0972 63.6695 10.5334 62.8385 10.5334C62.1464 10.5334 61.8694 10.2062 61.8694 9.74282C61.8694 9.03407 62.5064 8.78875 63.5862 8.78875H64.3065V9.36118Z"
                      fill="#202020"
                    />
                    <path
                      d="M70.981 4.89062C69.8456 4.89062 69.1258 5.43582 68.7932 6.09005V5.02692H66.9102V11.6782H68.7932V7.86189C68.7932 6.88058 69.4023 6.3899 70.2056 6.3899C71.0362 6.3899 71.3961 6.82604 71.3961 7.72561V11.7055H73.2791V7.453C73.2513 5.68115 72.31 4.89062 70.981 4.89062Z"
                      fill="#202020"
                    />
                    <path
                      d="M79.1224 6.03449C78.7347 5.35301 78.07 4.88959 76.9902 4.88959C75.3012 4.88959 74.0273 6.17079 74.0273 8.35158V8.46061C74.0273 10.6686 75.3286 11.8408 76.9624 11.8408C77.9593 11.8408 78.7898 11.2683 79.1224 10.5869V11.7045H80.9777V2.02734H79.1224V6.03449ZM79.1776 8.40607C79.1776 9.74178 78.4855 10.396 77.5164 10.396C76.5747 10.396 75.9377 9.74178 75.9377 8.43332V8.32429C75.9377 6.98858 76.5195 6.30708 77.5715 6.30708C78.5962 6.30708 79.1776 6.98858 79.1776 8.29704V8.40607Z"
                      fill="#202020"
                    />
                    <path
                      d="M86.9017 5.05469L85.3786 9.03457L83.7447 5.05469H81.7236L84.4095 11.0245L83.2185 13.9686H85.0464L88.7013 5.05469H86.9017Z"
                      fill="#202020"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_35895_50272">
                      <rect
                        width="88"
                        height="15.9196"
                        fill="white"
                        transform="translate(0.701172 0.0390625)"
                      />
                    </clipPath>
                    <clipPath id="clip1_35895_50272">
                      <rect
                        width="16.0915"
                        height="15.9196"
                        fill="white"
                        transform="translate(0.701172 0.0390625)"
                      />
                    </clipPath>
                  </defs>
                </svg>
              </div>

              <div
                style={{
                  display: 'flex',
                  justifyContent: 'center',
                  alignItems: 'center',
                  gap: '16px',
                }}
              >
                <div
                  className="credits-container"
                  onClick={handleClick} // Adding onClick event handler
                  style={{
                    backgroundColor: '#EFF6FF',
                    borderRadius: '4px',
                    border: '1px solid #BFDBFE',
                    cursor: 'pointer',
                    padding: '2px 6px',
                    height: '20px',
                    alignItems: 'center',
                    display: 'flex',
                    gap: '2px',
                    width: 'auto',
                  }}
                >
                  <svg
                    width="14"
                    height="14"
                    viewBox="0 0 14 14"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M3.00013 2.61134C3.10555 2.43563 3.29543 2.32812 3.50033 2.32812H10.5003C10.7052 2.32812 10.8951 2.43563 11.0005 2.61134L12.7505 5.528C12.8821 5.74723 12.8555 6.02656 12.6851 6.21709L7.72672 11.7588C7.72085 11.7653 7.71483 11.7717 7.70867 11.778C7.61633 11.8723 7.50613 11.9471 7.3845 11.9983C7.26286 12.0494 7.13226 12.0757 7.00033 12.0757C6.8684 12.0757 6.7378 12.0494 6.61617 11.9983C6.49454 11.9471 6.38433 11.8723 6.292 11.778C6.28583 11.7717 6.27981 11.7653 6.27394 11.7588L1.31561 6.21709C1.14514 6.02656 1.11859 5.74723 1.25013 5.528L3.00013 2.61134ZM3.83061 3.49479L2.47174 5.75957L7.00033 10.8209L11.5289 5.75957L10.1701 3.49479H3.83061Z"
                      fill="#1D4ED8"
                    />
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M5.31647 4.63986C5.59273 4.80561 5.68231 5.16393 5.51655 5.44018L5.3896 5.65178L6.26465 6.61434C6.48136 6.85272 6.46379 7.22165 6.22541 7.43836C5.98702 7.65507 5.6181 7.6375 5.40138 7.39912L4.23472 6.11579C4.06159 5.92535 4.03373 5.64396 4.16614 5.42327L4.51614 4.83994C4.6819 4.56368 5.04022 4.4741 5.31647 4.63986Z"
                      fill="#1D4ED8"
                    />
                  </svg>
                  <span
                    style={{
                      color: '#1D4ED8',
                      fontSize: '12px',
                      fontWeight: '500',
                      lineHeight: '16px',
                    }}
                  >
                    {leadFinderCredits}
                  </span>
                </div>
                <div onClick={handleProfileClick}>
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 16 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M6.66699 7.99588C6.66699 7.2595 7.26395 6.66254 8.00033 6.66254C8.73671 6.66254 9.33366 7.2595 9.33366 7.99588C9.33366 8.73226 8.73671 9.32921 8.00033 9.32921C7.26395 9.32921 6.66699 8.73226 6.66699 7.99588Z"
                      fill="#6B7280"
                    />
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M6.66699 12.6675C6.66699 11.9312 7.26395 11.3342 8.00033 11.3342C8.73671 11.3342 9.33366 11.9312 9.33366 12.6675C9.33366 13.4039 8.73671 14.0009 8.00033 14.0009C7.26395 14.0009 6.66699 13.4039 6.66699 12.6675Z"
                      fill="#6B7280"
                    />
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M6.66699 3.33919C6.66699 2.60281 7.26395 2.00586 8.00033 2.00586C8.7367 2.00586 9.33366 2.60281 9.33366 3.33919C9.33366 4.07557 8.7367 4.67253 8.00033 4.67253C7.26395 4.67253 6.66699 4.07557 6.66699 3.33919Z"
                      fill="#6B7280"
                    />
                  </svg>
                </div>

                <button
                  type="button"
                  style={{
                    background: 'transparent',
                    border: 'none',
                    cursor: 'pointer',
                  }}
                  onClick={handleClose}
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 16 16"
                    fill="none"
                  >
                    <path
                      // fill-rule="evenodd"
                      // clip-rule="evenodd"
                      d="M2.66699 8.00065C2.66699 7.63246 2.96547 7.33398 3.33366 7.33398H12.667C13.0352 7.33398 13.3337 7.63246 13.3337 8.00065C13.3337 8.36884 13.0352 8.66732 12.667 8.66732H3.33366C2.96547 8.66732 2.66699 8.36884 2.66699 8.00065Z"
                      fill="#6B7280"
                    />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </>
      )}
    </>
  );
};

export default Header;
