import React, { useEffect } from 'react';
import { Toast } from 'react-bootstrap';

const TYPE_STYLES = {
  success: {
    backgroundColor: '#ECFDF5',
    borderColor: '#D1FAE5',
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="17"
        viewBox="0 0 16 17"
        fill="none"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M15.1379 4.70112C15.3983 4.96147 15.3983 5.38358 15.1379 5.64393L8.47124 12.3106C8.21089 12.5709 7.78878 12.5709 7.52843 12.3106L4.1951 8.97726C3.93475 8.71691 3.93475 8.2948 4.1951 8.03446C4.45545 7.77411 4.87756 7.77411 5.13791 8.03446L7.99984 10.8964L14.1951 4.70112C14.4555 4.44077 14.8776 4.44077 15.1379 4.70112Z"
          fill="#059669"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M11.8046 4.70112C12.0649 4.96147 12.0649 5.38358 11.8046 5.64393L8.47124 8.97726C8.21089 9.23761 7.78878 9.23761 7.52843 8.97726C7.26808 8.71691 7.26808 8.2948 7.52843 8.03446L10.8618 4.70112C11.1221 4.44077 11.5442 4.44077 11.8046 4.70112ZM0.861766 8.03446C1.12212 7.77411 1.54423 7.77411 1.80458 8.03446L5.13791 11.3678C5.39826 11.6281 5.39826 12.0502 5.13791 12.3106C4.87756 12.5709 4.45545 12.5709 4.1951 12.3106L0.861766 8.97726C0.601417 8.71691 0.601417 8.2948 0.861766 8.03446Z"
          fill="#059669"
        />
      </svg>
    ),
  },
  warning: {
    backgroundColor: '#FFFBEB',
    borderColor: '#FEF3C7',
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8.00016 2.66732C5.05464 2.66732 2.66683 5.05513 2.66683 8.00065C2.66683 10.9462 5.05464 13.334 8.00016 13.334C10.9457 13.334 13.3335 10.9462 13.3335 8.00065C13.3335 5.05513 10.9457 2.66732 8.00016 2.66732ZM1.3335 8.00065C1.3335 4.31875 4.31826 1.33398 8.00016 1.33398C11.6821 1.33398 14.6668 4.31875 14.6668 8.00065C14.6668 11.6826 11.6821 14.6673 8.00016 14.6673C4.31826 14.6673 1.3335 11.6826 1.3335 8.00065Z"
          fill="#D97706"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8.00016 4.66981C8.36835 4.66981 8.66683 4.96829 8.66683 5.33648V8.00315C8.66683 8.37134 8.36835 8.66981 8.00016 8.66981C7.63197 8.66981 7.3335 8.37134 7.3335 8.00315V5.33648C7.3335 4.96829 7.63197 4.66981 8.00016 4.66981Z"
          fill="#D97706"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M7.3335 10.6648C7.3335 10.2966 7.63197 9.99816 8.00016 9.99816H8.00683C8.37502 9.99816 8.6735 10.2966 8.6735 10.6648C8.6735 11.033 8.37502 11.3315 8.00683 11.3315H8.00016C7.63197 11.3315 7.3335 11.033 7.3335 10.6648Z"
          fill="#D97706"
        />
      </svg>
    ),
  },
  danger: {
    backgroundColor: '#FEF2F2',
    borderColor: '#FEE2E2',
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M8.00036 5.3339C8.36855 5.3339 8.66703 5.63238 8.66703 6.00057V7.3339C8.66703 7.70209 8.36855 8.00057 8.00036 8.00057C7.63217 8.00057 7.33369 7.70209 7.33369 7.3339V6.00057C7.33369 5.63238 7.63217 5.3339 8.00036 5.3339ZM8.00036 9.3339C8.36855 9.3339 8.66703 9.63238 8.66703 10.0006V10.0072C8.66703 10.3754 8.36855 10.6739 8.00036 10.6739C7.63217 10.6739 7.33369 10.3754 7.33369 10.0072V10.0006C7.33369 9.63238 7.63217 9.3339 8.00036 9.3339Z"
          fill="#DC2626"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M6.98461 1.58769C7.29236 1.40624 7.6431 1.31055 8.00036 1.31055C8.35762 1.31055 8.70836 1.40624 9.01611 1.58769C9.32241 1.76827 9.57501 2.02724 9.7479 2.33787L14.4125 10.501C14.4272 10.5267 14.4402 10.5534 14.4514 10.5808C14.5714 10.8764 14.619 11.1964 14.5902 11.5141C14.5614 11.8319 14.457 12.1381 14.2857 12.4072C14.1144 12.6764 13.8812 12.9007 13.6056 13.0613C13.33 13.222 13.02 13.3144 12.7014 13.3308C12.6899 13.3314 12.6785 13.3317 12.667 13.3317H3.38036C3.37271 13.3317 3.36509 13.3316 3.35749 13.3313C3.3383 13.332 3.31891 13.3318 3.29937 13.3308C2.98077 13.3144 2.67071 13.222 2.3951 13.0613C2.11948 12.9007 1.8863 12.6764 1.71502 12.4072C1.54374 12.1381 1.43934 11.8319 1.41052 11.5141C1.3817 11.1964 1.42931 10.8764 1.54937 10.5808C1.56052 10.5534 1.5735 10.5267 1.5882 10.501L6.25282 2.33787C6.42572 2.02724 6.67831 1.76827 6.98461 1.58769ZM3.35877 11.9987C3.36594 11.9985 3.37314 11.9984 3.38036 11.9984H12.6469C12.7481 11.991 12.8464 11.9606 12.9341 11.9094C13.026 11.8559 13.1037 11.7811 13.1608 11.6914C13.2179 11.6017 13.2527 11.4996 13.2623 11.3937C13.2708 11.3001 13.2594 11.2058 13.229 11.1172L8.58364 2.98783C8.52599 2.88363 8.44153 2.79674 8.33895 2.73626C8.23636 2.67578 8.11945 2.64388 8.00036 2.64388C7.88127 2.64388 7.76436 2.67578 7.66178 2.73626C7.55919 2.79674 7.47468 2.8836 7.41703 2.9878L7.41258 2.99584L2.77175 11.1172C2.74133 11.2058 2.72991 11.3001 2.7384 11.3937C2.74801 11.4996 2.78281 11.6017 2.8399 11.6914C2.897 11.7811 2.97472 11.8559 3.06659 11.9094C3.1558 11.9614 3.25582 11.992 3.35877 11.9987Z"
          fill="#DC2626"
        />
      </svg>
    ),
  },
};

const Toaster = ({ header = '', body = '', type = 'success', onClose }) => {
  const { backgroundColor, borderColor, icon } =
    TYPE_STYLES[type] || TYPE_STYLES.success;
  const toasterRef = React.useRef(null);

  useEffect(() => {
    toasterRef.current = setTimeout(() => {
      onClose();
    }, 5000);
  }, []);

  const handleClose = () => {
    clearTimeout(toasterRef.current);
    onClose();
  };

  return (
    <Toast
      style={{
        backgroundColor,
        borderRadius: '4px',
        border: `1px solid ${borderColor}`,
        padding: '8px 12px',
        position: 'absolute',
        width: '300px',
      }}
    >
      <div
        style={{
          display: 'flex',
          gap: '8px',
        }}
      >
        {icon && <span>{icon}</span>}
        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            alignContent: 'center',
            justifyContent: 'center',
            gap: '4px',
          }}
        >
          <div
            style={{
              color: '#1f2937',
              fontSize: '12px',
              fontWeight: '600',
              lineHeight: '16px',
              fontFamily: 'Inter',
              display: 'flex',
              justifyContent: 'space-between',
            }}
          >
            {header}
            <span onClick={handleClose} style={{ cursor: 'pointer' }}>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="17"
                viewBox="0 0 16 17"
                fill="none"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M12.4716 4.02925C12.7319 4.2896 12.7319 4.71171 12.4716 4.97206L4.47157 12.9721C4.21122 13.2324 3.78911 13.2324 3.52876 12.9721C3.26841 12.7117 3.26841 12.2896 3.52876 12.0292L11.5288 4.02925C11.7891 3.7689 12.2112 3.7689 12.4716 4.02925Z"
                  fill="#6B7280"
                />
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M3.52876 4.02925C3.78911 3.7689 4.21122 3.7689 4.47157 4.02925L12.4716 12.0292C12.7319 12.2896 12.7319 12.7117 12.4716 12.9721C12.2112 13.2324 11.7891 13.2324 11.5288 12.9721L3.52876 4.97206C3.26841 4.71171 3.26841 4.2896 3.52876 4.02925Z"
                  fill="#6B7280"
                />
              </svg>
            </span>
          </div>
          <div
            style={{
              color: '#1f2937',
              fontSize: '12px',
              fontWeight: '400',
              lineHeight: '16px',
              padding: '0px',
              fontFamily: 'Inter',
            }}
          >
            {body}
          </div>
        </div>
      </div>
    </Toast>
  );
};
export default Toaster;
